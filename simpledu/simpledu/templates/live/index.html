{% extends "base.html" %}


{% block title %}Live{% endblock %}


{% block body %}
<div class="row">
    <div class="col-md-9">
        <video width="100%" height="500px" control="controls" id="videoElement"></video>
    </div>
    <div class="col-md-3">
    </div>
</div>
{% endblock %}


{% block tail_js %}
{{ super() }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.3.3/flv.min.js"></script>
<script>
if (flvjs.isSupported()) {
    // 获取video标签
    var videoElement = document.getElementById('videoElement');
    // 初始化播放器
    var flvPlayer = flvjs.createPlayer({
        // 流的类型
        type: 'flv',
        // 是否是直播
        isLive: true,
        // 直播流地址
        url: 'https://txy.live-play.acgvideo.com/live-txy/992664/live_571362_332_c521e483.flv?wsSecret=206c9d0be9edcc049471c856e8e9fd79&wsTime=1560702647&trid=bb4bfb0af75d4c73bd459caf7d56b9d7&order=1&sig=no&platform=web&pSession=9Q3Ef6A9-pXZH-4aRx-xfeP-krXJzmSwTndB'
    });
    flvPlayer.attachMediaElement(videoElement)
    flvPlayer.load()
    // 播放直播
    flvPlayer.play()
}
</script>
{% endblock %}